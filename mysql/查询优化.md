# 1什么是数据库技术

## 1.1什么是 数据库管理系统

* 是一种操纵和管理数据的大型软件，用于建立、使用和维护数据简称DBMS

* 他对数据进行统一的管理和控制，以保证数据的完整性和一致性

* 用户通过DBMS访问数据库中的数据，数据库管理员也通过DBMS进行数据库的维护工作

* 他可以使多个应用程序和用户用不同的方法在同时获不同时刻去建立、修改和查询数据

* DBMS提供数据定义语言DDL（Data Definition Language）和数据库操作语言DML（Data Manipulation Language），供用户定义数据库的模式结构和权限约束，实现对数据的追加、删除等操作

* 只要做数据处理，软件规模到了一定程度，似乎都成了数据库（如：HBase/MongoDB）

  ### 衡量是否为数据库的标准

  ACID，是指在数据库管理系统中的事物所具有的四个特性

  * 原子性（atomicity）
  * 一致性（consistency）
  * 隔离性（isolation）
  * 持久性（durability）

  ## CAP原则

  CAP原则又称CAP定理，指的是在一个分布式系统中，[一致性](https://baike.baidu.com/item/一致性/9840083)（Consistency）、[可用性](https://baike.baidu.com/item/可用性/109628)（Availability）、分区容错性（Partition tolerance）。CAP 原则指的是，这三个要素最多只能同时实现两点，不可能三者兼顾

  一致性（C）：在[分布式系统](https://baike.baidu.com/item/分布式系统/4905336)中的所有数据备份，在同一时刻是否同样的值。（等同于所有节点访问同一份最新的数据副本）

  可用性（A）：在集群中一部分节点故障后，[集群](https://baike.baidu.com/item/集群/5486962)整体是否还能响应[客户端](https://baike.baidu.com/item/客户端/101081)的读写请求。（对数据更新具备高可用性）

  分区容忍性（P）：以实际效果而言，分区相当于对通信的时限要求。系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C和A之间做出选择。

  CAP原则的精髓就是要么AP，要么CP，要么AC，但是不存在CAP。如果在某个分布式系统中数据无副本， 那么系统必然满足强一致性条件， 因为只有独一数据，不会出现数据不一致的情况，此时C和P两要素具备，但是如果系统发生了网络分区状况或者宕机，必然导致某些数据不可以访问，此时可用性条件就不能被满足，即在此情况下获得了CP系统，但是CAP不可同时满足 。

  因此在进行分布式架构设计时，必须做出取舍。当前一般是通过分布式缓存中各节点的最终一致性来提高系统的性能，通过使用多节点之间的数据异步复制技术来实现集群化的数据一致性。通常使用类似 memcached 之类的 NOSQL 作为实现手段。虽然 memcached 也可以是分布式集群环境的，但是对于一份数据来说，它总是存储在某一台 memcached 服务器上。如果发生网络故障或是服务器死机，则存储在这台服务器上的所有数据都将不可访问。由于数据是存储在内存中的，重启[服务器](https://baike.baidu.com/item/服务器/100571)，将导致数据全部丢失。当然也可以自己实现一套机制，用来在分布式 memcached 之间进行数据的同步和持久化，但是实现难度是非常大的 [2] 。

  

## 1.2什么是关系型数据库管理系统



### 	历史上的几种类型数据库

* 层次型

* 网状型

* 关系型

  ## 关系型数据库
  
  是建立在关系数据库模型上的数据库，借助于关系代数等概念和方法来处理数据库中的数据，同时也是一个被组织成一组拥有正式描述性的表格，改形式的表格作用的实质是装载着数据项的特殊收集体，这些表格中的数据能以许多不同的方式被存取或重新召集而不需要重新组织数据库表格



# 2关系代数

数学中，关系代数是支持叫做逆反的对合一元运算的剩余布尔代数，激发关系代数中的例子是在集合X上的所有二元关系的代数，带有R-S被解释为平常的二元关系复合

数据库中，关系代数是一阶逻辑的分支，是**闭合于运算下**的**关系**的集合。运算作用于一个或多个关系上来生成的一个关系。关系代数是计算机科学的一部分

在纯数学中的关系代数是有关于数理逻辑和集合论的代数结构

SQL的查询语言松散的基于了关系代数，尽管SQL只补发的操作数（表）不完全是关系，很多有用的关于关系代数的理论在SQL对应者中不成立



# 3查询优化技术

数据库查询优化主要包括查询重用技术、查询重写规则、查询算法优化技术、并行查询优化技术、分布式查询优化技术遗迹其他方面（如框架结构）的优化技术，这六项技术成为**广义的数据库查询优化**

查询重写规则和查询算法优化被称为**狭义的数据库查询优化**

从优化的角度上来看还可以分为**代数优化**和**非代数优化**，或称为**逻辑优化**和**物理优化**，逻辑优化主要依据关系代数的等价变换做的一些逻辑变换，物理优化主要依据数据读取、表连接方式、表连接顺序、排序等技术对查询进行优化

* 查询重用技术

  * 查询结果优化（查询结构缓存，以待下一次相同查询取用）
  * 查询计划优化（把查询计划缓存起来，下次相同查询直接取出查询计划，交给cpu执行）

* 查询重写规则

  * 基于关系代数和启发式规则所进行的查询优化
  * 视图重写、查询优化、等价位置重写、条件化简、外连接的消除、连接的消除、嵌套连接的消除
  * 语义优化

* 查询优化算法

  * 单表扫描算法（全表扫描、基于索引的扫描、基于行的直接定位的扫描）
  * 两表连接算法(嵌套循环算法、归并连接算法、hash链接算法)
  * 多表连接算法（贪婪算法）

* 并行查询优化

  是指对于同样的一个sql语句操作，我们怎么能最大限度的把这些操作分解，然后让这些操作并行的去执行，这样呢能够整体的节约执行的时间

* 分布式查询优化算法

  主要是指对于分布式系统进行的，分布式系统的特点：1.数据分布2.处理单元分布,处理单元包括CPU、内存。让这些分布式的数据让分布式单元最大限度的操作起来，尽快的得到一个结果